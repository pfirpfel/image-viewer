{"version":3,"sources":["..\\viewer.js"],"names":[],"mappings":"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","file":"viewer.js","sourcesContent":["(function (window) {\r\n  \"use strict\";\r\n\r\n  function ImageViewer(canvasId, imageUrl, options){\r\n    var self = this;\r\n\r\n    // options-object\r\n    // possible start options:\r\n    // * mode:     string (other than default viewer-only mode)\r\n    //             - 'editAnswer'   : displays answer and answer related buttons\r\n    //             - 'editSolution' : displays solution and solution related buttons\r\n    //             - 'showSolution' : displays answer and solution\r\n    // * answer:   position-object, like { x: 0; y: 0; }\r\n    //             position of answer inside the image\r\n    // * solution: array of positions, like [{ x: 0; y: 0; }, { x: 1; y: 1; }]\r\n    //             the positions represent vertices which make up the solution\r\n    //             polygon\r\n    options = (typeof options === 'object') ? options : {};\r\n\r\n    // canvas\r\n    var canvas = document.getElementById(canvasId)\r\n      , context = canvas.getContext(\"2d\")\r\n\r\n    // dirty state\r\n      , dirty = true\r\n\r\n    // flag to stop render loop\r\n      , stopRendering = false\r\n\r\n    // image scale\r\n      , scale = 1\r\n      , scaleStep = 0.1\r\n\r\n    // image centre (scroll offset)\r\n      , centre = { x: 0, y: 0 }\r\n\r\n    // drawing settings\r\n      , defaultLineWidth = 3\r\n\r\n    // viewer states\r\n      , states = {\r\n          DEFAULT: 0,\r\n          ANSWER_DRAW: 1,\r\n          SOLUTION_DRAW: 2,\r\n          SOLUTION_MOVE: 3,\r\n          SOLUTION_POINT_DELETE: 4,\r\n          ANNOTATION_SELECT: 5,\r\n          ANNOTATION_DRAW: 6,\r\n          ANNOTATION_MOVE: 7,\r\n          ANNOTATION_DISPLAY: 8\r\n        }\r\n      , state = states.DEFAULT\r\n\r\n    // keeping track of event handling\r\n      , events = []\r\n\r\n    //// buttons\r\n\r\n      // default buttons that are always visible\r\n      , zoomOutButton = new Button('\\uf010', 'Zoom out')\r\n      , zoomInButton = new Button('\\uf00e', 'Zoom in')\r\n      , defaultButtons = [zoomOutButton, zoomInButton]\r\n\r\n      // buttons for answer feature\r\n      , deleteAnswerButton = new Button('\\uf1f8', 'Delete answer')\r\n      , addAnswerButton = new Button('\\uf024', 'Set answer')\r\n      , answerButtons = [deleteAnswerButton, addAnswerButton]\r\n\r\n      // buttons for the solution feature\r\n      , drawSolutionPointButton = new Button('\\uf040', 'Draw new solution point (close with shift-click)')\r\n      , moveSolutionButton = new Button('\\uf047', 'Move solution point')\r\n      , deleteSolutionPointButton = new Button('\\uf00d', 'Delete solution point')\r\n      , deleteSolutionButton = new Button('\\uf1f8', 'Delete solution')\r\n      , solutionButtons = [deleteSolutionButton,\r\n                           deleteSolutionPointButton,\r\n                           moveSolutionButton,\r\n                           drawSolutionPointButton]\r\n\r\n      // contains all active buttons\r\n      , buttons = defaultButtons.slice()\r\n\r\n      // current tool tip (used to track change of tool tip)\r\n      , currentTooltip = null\r\n\r\n    // Input handling\r\n      // active element (mainly) used for dragging\r\n      , activeMoveElement = centre\r\n      // track state of left mouse button (even outside the canvas)\r\n      , leftMouseButtonDown = false\r\n      // keep last mouse position to calculate drag distance\r\n      , mouseLastPos = null\r\n\r\n    // answer feature\r\n      , answerEditable = (typeof options.mode === 'string' && options.mode === 'editAnswer')\r\n      , answerVisible = answerEditable || (typeof options.mode === 'string' && options.mode === 'showSolution')\r\n\r\n    // solution feature\r\n      , solutionEditable = (typeof options.mode === 'string' && options.mode === 'editSolution')\r\n      , solutionVisible = solutionEditable || (typeof options.mode === 'string' && options.mode === 'showSolution')\r\n\r\n    // annotation feature\r\n      , annotationsEditable = (typeof options.mode === 'string' && options.mode === 'editAnnotations')\r\n      , annotationsVisible = annotationsEditable || (typeof options.mode === 'string' && options.mode === 'showAnnotations');\r\n\r\n    // image\r\n    this.image = new Image();\r\n\r\n    // answer\r\n    this.answer = (typeof options.answer === 'object' && options.answer !== null) ? options.answer : null;\r\n\r\n    // solution\r\n    this.solution = null;\r\n\r\n    // annotations\r\n    // format: { polygon: Polygon-object, color: color-string }\r\n    this.annotations = [];\r\n\r\n    function importPolygon(vertexArray){\r\n       if(vertexArray.length < 1){\r\n        return new Polygon();\r\n      }\r\n      var initialVertex = new Vertex(vertexArray[0].x, vertexArray[0].y)\r\n        , current = initialVertex\r\n        , next = null;\r\n\r\n      for(var i = 1; i < vertexArray.length; i++){\r\n        next = new Vertex(vertexArray[i].x, vertexArray[i].y);\r\n        if(next.equals(initialVertex)){\r\n          current.next = initialVertex;\r\n          break;\r\n        }\r\n        current.next = next;\r\n        current = next;\r\n      }\r\n\r\n      return new Polygon(initialVertex);\r\n    }\r\n\r\n    function exportPolygon(polygon){\r\n      // return empty array if polygon is empty\r\n      if(typeof polygon === 'undefined' || polygon === null) return [];\r\n\r\n      var exportedPolygon = [];\r\n      var vertices = polygon.getVertices();\r\n      //if closed path, add start point at the end again\r\n      if(vertices[vertices.length - 1].next === vertices[0]) vertices.push(vertices[0]);\r\n      for(var i = 0; i < vertices.length; i++){\r\n        exportedPolygon.push({\r\n          x: vertices[i].position.x,\r\n          y: vertices[i].position.y\r\n        });\r\n      }\r\n      return exportedPolygon;\r\n    }\r\n\r\n    this.exportSolution = function(){\r\n      return exportPolygon(this.solution);\r\n    };\r\n\r\n    this.importSolution = function(importedSolution){\r\n      this.solution = (importedSolution.length >= 1) ? importPolygon(importedSolution) : null;\r\n      dirty = true;\r\n    };\r\n\r\n    this.exportAnnotations = function(){\r\n      return this.annotations.map(function(annotation){\r\n        return {\r\n          color: annotation.color,\r\n          polygon: exportPolygon(annotation.polygon)\r\n        };\r\n      });\r\n    };\r\n\r\n    this.importAnnotations = function(importedAnnotations){\r\n      this.annotations = importedAnnotations.map(function(importAnnotation){\r\n        return {\r\n          color: importAnnotation.color,\r\n          polygon: importPolygon(importAnnotation.polygon)\r\n        };\r\n      });\r\n    };\r\n\r\n    // gets called if the solution changes\r\n    this.onSolutionChange = function(solution){};\r\n\r\n    // gets called if one or more of the annotations change\r\n    this.onAnnotationChange = function(annotations){};\r\n\r\n    function onImageLoad(){\r\n      // set scale to use as much space inside the canvas as possible\r\n      if(((canvas.height / self.image.height) * self.image.width) <= canvas.width){\r\n        scale = canvas.height / self.image.height;\r\n      } else {\r\n        scale = canvas.width / self.image.width;\r\n      }\r\n\r\n      // centre at image centre\r\n      centre.x = self.image.width / 2;\r\n      centre.y = self.image.height / 2;\r\n\r\n      // image changed\r\n      dirty = true;\r\n\r\n      // start new render loop\r\n      render();\r\n    }\r\n\r\n    this.zoomIn = function(){\r\n      scale = scale * (1 + scaleStep);\r\n      dirty = true;\r\n    };\r\n\r\n    this.zoomOut = function(){\r\n      scale = scale * (1 - scaleStep);\r\n      dirty = true;\r\n    };\r\n\r\n    function render(){\r\n      // only re-render if dirty\r\n      if(dirty){\r\n        dirty = false;\r\n\r\n        var ctx = context;\r\n        // clear canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // draw image (transformed and scaled)\r\n        ctx.save();\r\n        var translateX = canvas.width / 2 - centre.x * scale\r\n          , translateY = canvas.height / 2 - centre.y * scale;\r\n\r\n        ctx.translate(translateX, translateY);\r\n        ctx.scale(scale, scale);\r\n\r\n        ctx.drawImage(self.image, 0,0);\r\n\r\n        ctx.restore();\r\n\r\n        // draw solution\r\n        if(solutionVisible && self.solution !== null){\r\n          self.solution.draw(ctx);\r\n\r\n          // draw line to mouse cursor\r\n         if(solutionEditable && !self.solution.isClosed()){\r\n            var lastVertexPosition = self.solution.getLastVertex().position\r\n              //, mousePosition = { x: mouseLastPos.x / scale, y: mouseLastPos.y / scale };\r\n              , mousePosition = convertToImagePosition(mouseLastPos)\r\n              , relativePosition = {\r\n                x: mousePosition.x - lastVertexPosition.x,\r\n                y: mousePosition.y - lastVertexPosition.y\r\n              };\r\n              drawLine(ctx, lastVertexPosition, relativePosition, '#FF3300', defaultLineWidth);\r\n          }\r\n        }\r\n\r\n        // draw annotations\r\n        if(annotationsVisible){\r\n          self.annotations.forEach(function(annotation){\r\n            annotation.polygon.draw(ctx, annotation.color);\r\n          });\r\n        }\r\n\r\n        // draw solution\r\n        if(solutionVisible && self.solution !== null){\r\n          self.solution.draw(ctx);\r\n        }\r\n\r\n        // draw answer\r\n        if(answerVisible && self.answer !== null){\r\n          drawAnswer(ctx);\r\n        }\r\n\r\n        // draw buttons\r\n        drawButtons(ctx);\r\n      }\r\n      if(!stopRendering) window.requestAnimationFrame(render);\r\n    }\r\n\r\n    function drawLine(ctx, from, to, lineColor, lineWidth){\r\n      /**\r\n      * ctx: canvas context\r\n      * from: start-vertex, in image coordinates\r\n      * to: end-vertex, in image coordinates\r\n      * lineColor: color string\r\n      * lineWidth: number, width in pixel\r\n      */\r\n\r\n      ctx.save();\r\n\r\n      // style\r\n      ctx.strokeStyle = lineColor;\r\n      ctx.lineWidth = lineWidth;\r\n\r\n      // draw the line\r\n      var translation = convertToCanvasTranslation(from)\r\n        , drawPos =  { x: 0, y: 0};\r\n      ctx.translate(translation.x, translation.y);\r\n      ctx.scale(scale, scale);\r\n      ctx.beginPath();\r\n      ctx.moveTo(drawPos.x, drawPos.y);\r\n      ctx.lineTo(to.x, to.y);\r\n      ctx.stroke();\r\n\r\n      ctx.restore();\r\n    }\r\n\r\n    function drawButtons(ctx){\r\n      var padding = 10\r\n        , radius = 20\r\n        , gap = 2 * radius + padding\r\n        , x = canvas.width - radius - padding\r\n        , y = canvas.height - radius - padding;\r\n\r\n      // draw buttons\r\n      for(var i = 0; i < buttons.length; i++){\r\n        buttons[i].draw(ctx, x, y - gap * i, radius);\r\n      }\r\n\r\n      // draw tooltip\r\n      if(currentTooltip !== null){\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.5;\r\n        var fontSize = radius;\r\n        ctx.font = fontSize + \"px sans-serif\";\r\n\r\n        // calculate position\r\n        var textSize = ctx.measureText(currentTooltip).width\r\n          , rectWidth = textSize + padding\r\n          , rectHeight = fontSize * 0.70 + padding\r\n          , rectX = canvas.width\r\n                    - (2 * radius + 2 * padding) // buttons\r\n                    - rectWidth\r\n          , rectY = canvas.height - rectHeight - padding\r\n          , textX = rectX + 0.5 * padding\r\n          , textY = canvas.height - 1.5 * padding;\r\n\r\n        ctx.fillStyle = '#000000';\r\n        drawRoundRectangle(ctx, rectX, rectY, rectWidth, rectHeight, 8, true, false);\r\n\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.fillText(currentTooltip, textX, textY);\r\n\r\n        ctx.restore();\r\n      }\r\n    }\r\n\r\n    function drawRoundRectangle(ctx, x, y, width, height, radius, fill, stroke){\r\n      radius = (typeof radius === 'number') ? radius : 5;\r\n      fill = (typeof fill === 'boolean') ? fill : true; // fill = default\r\n      stroke = (typeof stroke === 'boolean') ? stroke : false;\r\n\r\n      // draw round rectangle\r\n      ctx.beginPath();\r\n      ctx.moveTo(x + radius, y);\r\n      ctx.lineTo(x + width - radius, y);\r\n      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n      ctx.lineTo(x + width, y + height - radius);\r\n      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n      ctx.lineTo(x + radius, y + height);\r\n      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n      ctx.lineTo(x, y + radius);\r\n      ctx.quadraticCurveTo(x, y, x + radius, y);\r\n      ctx.closePath();\r\n\r\n      if(fill) ctx.fill();\r\n      if(stroke) ctx.stroke();\r\n    }\r\n\r\n    function convertToImagePosition(canvasPosition){\r\n      var visiblePart = {\r\n            x: centre.x >= (canvas.width / scale / 2) ? centre.x - canvas.width / scale / 2 : 0,\r\n            y: centre.y >= (canvas.height / scale / 2) ? centre.y - canvas.height / scale / 2 : 0\r\n        }\r\n        , canvasImage = {\r\n            x: (centre.x >= (canvas.width / scale / 2)) ? 0 : canvas.width / 2 - centre.x * scale,\r\n            y: (centre.y >= (canvas.height / scale / 2)) ? 0 : canvas.height / 2 - centre.y * scale\r\n        }\r\n        , imagePosition = {};\r\n\r\n      imagePosition.x =\r\n              visiblePart.x // image offset\r\n            + canvasPosition.x / scale // de-scaled canvas position\r\n            - canvasImage.x / scale; // de-scaled canvas offset\r\n      imagePosition.y =\r\n              visiblePart.y // image offset\r\n            + canvasPosition.y  / scale // de-scaled canvas position\r\n            - canvasImage.y / scale; // de-scaled canvas offset\r\n\r\n      return imagePosition;\r\n    }\r\n\r\n    function convertToCanvasTranslation(imagePosition){\r\n      return {\r\n        x: (\r\n              imagePosition.x  // x-position on picture\r\n            + canvas.width / scale / 2 // offset of scaled canvas\r\n            - centre.x // scroll offset of image\r\n           ) * scale, // scale the transformation\r\n\r\n        y: (\r\n              imagePosition.y  // y-position on picture\r\n            + canvas.height / scale / 2 // offset of scaled canvas\r\n            - centre.y // scroll offset of image\r\n           ) * scale // scale the transformation\r\n      };\r\n    }\r\n\r\n    function Vertex(x, y) {\r\n      var vertexInstance = this;\r\n\r\n      var pos = this.position = {\r\n        x: x,\r\n        y: y\r\n      };\r\n\r\n      this.next = null;\r\n\r\n      this.handleWidth = 12;\r\n\r\n      this.onClick = function(evt){\r\n        if(state === states.SOLUTION_POINT_DELETE){\r\n          self.solution.deleteVertex(vertexInstance);\r\n          self.onSolutionChange(self.exportSolution());\r\n          dirty = true;\r\n          return;\r\n        }\r\n        if(state === states.SOLUTION_DRAW\r\n        && self.solution !== null\r\n        && vertexInstance.equals(self.solution.initialVertex)\r\n        ){\r\n          self.solution.close();\r\n          state = states.DEFAULT;\r\n          self.onSolutionChange(self.exportSolution());\r\n          return;\r\n        }\r\n      };\r\n\r\n      this.onMouseDown = function(){\r\n        if(state === states.SOLUTION_MOVE){\r\n          activeMoveElement = pos;\r\n          leftMouseButtonDown = true;\r\n          return true;\r\n        }\r\n        return false;\r\n      };\r\n    }\r\n\r\n    Vertex.prototype.equals = function(other){\r\n      return this.position.x === other.position.x\r\n          && this.position.y === other.position.y;\r\n    };\r\n\r\n    Vertex.prototype.isWithinBounds = function(x, y){\r\n      var canvasPosition = convertToCanvasTranslation(this.position);\r\n\r\n      return x >= canvasPosition.x - this.handleWidth / 2 && x <= canvasPosition.x + this.handleWidth / 2\r\n          && y >= canvasPosition.y - this.handleWidth / 2 && y <= canvasPosition.y + this.handleWidth / 2;\r\n    };\r\n\r\n    Vertex.prototype.drawHandle = function(ctx){\r\n      // preserve context\r\n      ctx.save();\r\n\r\n      var translation = convertToCanvasTranslation(this.position);\r\n      ctx.translate(translation.x, translation.y);\r\n\r\n      ctx.fillStyle = '#FFFFFF';\r\n      ctx.strokeStyle = '#000000';\r\n\r\n      ctx.beginPath();\r\n      ctx.rect(-this.handleWidth/2, // x\r\n               -this.handleWidth/2, // y\r\n               this.handleWidth, // width\r\n               this.handleWidth); // height\r\n      ctx.stroke();\r\n      ctx.fill();\r\n\r\n      // restore context\r\n      ctx.restore();\r\n    };\r\n\r\n    function Polygon(initialVertex){\r\n      this.initialVertex = initialVertex || null;\r\n    }\r\n\r\n    Polygon.prototype.addVertex = function(vertex){\r\n      if(this.initialVertex !== null){\r\n        var last = this.initialVertex;\r\n        while(last.next !== null && last.next !== this.initialVertex){\r\n          last = last.next;\r\n        }\r\n        last.next = vertex;\r\n      } else {\r\n        this.initialVertex = vertex;\r\n      }\r\n      dirty = true;\r\n    };\r\n\r\n    Polygon.prototype.deleteVertex = function(vertex){\r\n      if(this.initialVertex !== null && this.initialVertex.equals(vertex)){\r\n        this.initialVertex = this.initialVertex.next;\r\n      } else {\r\n        var deleted = false\r\n          , current = this.initialVertex\r\n          , next = current.next;\r\n\r\n        while(!deleted && next !== null && next !== this.initialVertex){\r\n          if(next.equals(vertex)){\r\n            current.next = next.next;\r\n            deleted = true;\r\n          } else {\r\n            current = next;\r\n            next = current.next;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    Polygon.prototype.getVertices = function(){\r\n      var vertices = [], currentVertex = this.initialVertex;\r\n      while(currentVertex !== null){\r\n        if(vertices.indexOf(currentVertex) === -1){\r\n          vertices.push(currentVertex);\r\n        }\r\n        currentVertex = (currentVertex.next !== this.initialVertex) ? currentVertex.next : null;\r\n      }\r\n      return vertices;\r\n    };\r\n\r\n    Polygon.prototype.draw = function(ctx, fillColor, strokeColor){\r\n      // only draw lines or polygon if there is more than one vertex\r\n      if(this.initialVertex !== null && this.initialVertex.next !== null){\r\n        var drawPos =  { x: 0, y: 0}\r\n          , current = this.initialVertex\r\n          , next\r\n          , translation = convertToCanvasTranslation(this.initialVertex.position)\r\n          ;\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.7;\r\n        ctx.translate(translation.x, translation.y);\r\n        ctx.scale(scale, scale);\r\n        ctx.beginPath();\r\n        ctx.moveTo(drawPos.x, drawPos.y);\r\n        do {\r\n          next = current.next;\r\n          drawPos = {\r\n            x: drawPos.x + (next.position.x - current.position.x),\r\n            y: drawPos.y + (next.position.y - current.position.y)\r\n          };\r\n          ctx.lineTo(drawPos.x, drawPos.y);\r\n          current = next;\r\n        } while(current.next !== null && current !== this.initialVertex);\r\n\r\n        ctx.fillStyle = fillColor || '#0000FF';\r\n        ctx.strokeStyle = strokeColor || '#66FF33';\r\n        if(current === this.initialVertex){\r\n          ctx.strokeStyle = strokeColor || '#000000';\r\n          ctx.closePath();\r\n          ctx.fill();\r\n        }\r\n        ctx.lineWidth = defaultLineWidth;\r\n\r\n        ctx.stroke();\r\n        ctx.restore();\r\n      }\r\n\r\n      // draw handles\r\n      if(solutionEditable){\r\n        this.getVertices().forEach(function(handle){\r\n          handle.drawHandle(ctx);\r\n        });\r\n      }\r\n    };\r\n\r\n    Polygon.prototype.isClosed = function(){\r\n      var current = this.initialVertex;\r\n      while(current.next !== null && current.next !== this.initialVertex) current = current.next;\r\n      return current.next === this.initialVertex;\r\n    };\r\n\r\n    Polygon.prototype.getLastVertex = function(){\r\n      var current = this.initialVertex;\r\n      while(current.next !== null && current.next !== this.initialVertex) current = current.next;\r\n      return current;\r\n    };\r\n\r\n    function isLeft(p0, p1, p2){\r\n      // p0, p1, p2: point objects, like { x: 0, y: 0 }\r\n      // returns:\r\n      //          >0 : for p2 left of the line through p0 and p1\r\n      //          =0 : for p2  on the line\r\n      //          <0 : for p2  right of the line\r\n      // see: http://geomalgorithms.com/a01-_area.html\r\n      return ( (p1.x - p0.x) * (p2.y - p0.y) - (p2.x - p0.x) * (p1.y - p0.y));\r\n    }\r\n\r\n    Polygon.prototype.isWithinBounds = function(x, y){\r\n      // get all vertices\r\n      var vertices = this.getVertices()\r\n\r\n      // winding number\r\n        , wn = 0\r\n\r\n      // point to check\r\n        , p = { x: x, y: y };\r\n\r\n      // if polygon is not closed, the coordinates can't be within bounds\r\n      if(vertices[vertices.length - 1].next !== vertices[0]) return false;\r\n\r\n      // algorithm see: http://geomalgorithms.com/a03-_inclusion.html\r\n      for(var i = 0; i + 1 < vertices.length; i++){ // edge from vertices[i] to vertices[i+1]\r\n        if(vertices[i].position.y <= p.y){ // start y <= p.y\r\n          if(vertices[i + 1].position.y > p.y){ // an upward crossing\r\n            if(isLeft(vertices[i].position, vertices[i + 1].position, p) > 0){ // P left of edge\r\n              wn++; // have a valid up intersect\r\n            }\r\n          }\r\n        } else { // start y > p.y\r\n          if(vertices[i + 1].position.y <= p.y){ // a downward crossing\r\n            if(isLeft(vertices[i].position, vertices[i + 1].position, p) < 0){ // P right of  edge\r\n              wn--; // have a valid down intersect\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // wn == 0 only when p is outside\r\n      return wn !== 0;\r\n    };\r\n\r\n    Polygon.prototype.close = function(){\r\n      if(this.getVertices().length > 2){\r\n        this.addVertex(this.initialVertex);\r\n      }\r\n    };\r\n\r\n    function getAnswerColor(){\r\n      var color = '#0000ff'; // Default: blue\r\n\r\n      // change color if answer is within solution\r\n      if(solutionVisible){ // show solution flag enabled?\r\n        // is the answer within the solution?\r\n        if(self.solution !== null\r\n        && self.solution.isWithinBounds(self.answer.x, self.answer.y)){\r\n          color = '#00ff00'; //green\r\n        } else {\r\n          color = '#ff0000'; // red\r\n        }\r\n      }\r\n      return color;\r\n    }\r\n\r\n    function drawAnswer(ctx){\r\n      // preserve context\r\n      ctx.save();\r\n\r\n      var shapeScale = 1.5\r\n        , transalation = convertToCanvasTranslation(self.answer);\r\n\r\n      ctx.translate(transalation.x, transalation.y);\r\n      ctx.scale(shapeScale * scale, shapeScale * scale);\r\n      ctx.shadowColor = '#ffffff';\r\n      ctx.shadowBlur = 5;\r\n\r\n      drawAwesomeIcon(ctx, '\\uf05b', getAnswerColor(), 0, 0, 50);\r\n\r\n      // restore context\r\n      ctx.restore();\r\n    }\r\n\r\n    function getUIElements(){\r\n      // only return the solution vertices handler if in solution edit mode and there are some already\r\n      var solutionVertices = (self.solution !== null && solutionEditable)\r\n                             ? self.solution.getVertices()\r\n                             : [];\r\n      return buttons.concat(solutionVertices);\r\n    }\r\n\r\n    function getUIElement(evt){\r\n      var rect = canvas.getBoundingClientRect()\r\n        , pos = {\r\n            x: evt.clientX - rect.left,\r\n            y: evt.clientY - rect.top\r\n          }\r\n        , activeUIElement =\r\n              getUIElements()\r\n              .filter(function(button){\r\n                return button.isWithinBounds(pos.x, pos.y);\r\n              });\r\n      return (activeUIElement.length > 0 ) ? activeUIElement[0] : null;\r\n    }\r\n\r\n    function onMouseDown(evt){\r\n      if(evt.button === 0){ // left/main button\r\n        var activeElement = getUIElement(evt);\r\n        if(activeElement === null || !activeElement.onMouseDown(evt)){\r\n          // set flag for image moving\r\n          leftMouseButtonDown = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    function onMouseUp(evt){\r\n      if(evt.button === 0){ // left/main button\r\n        activeMoveElement = centre;\r\n        leftMouseButtonDown = false;\r\n      }\r\n    }\r\n\r\n    function onMouseClick(evt){\r\n      if(evt.button === 0){ // left/main button\r\n        var activeElement = getUIElement(evt);\r\n        if(activeElement !== null){\r\n          activeElement.onClick(evt);\r\n        } else {\r\n          var rect = canvas.getBoundingClientRect()\r\n            , clickPos = {\r\n                x: evt.clientX - rect.left,\r\n                y: evt.clientY - rect.top\r\n              };\r\n          if(state === states.ANSWER_DRAW){\r\n            self.answer = convertToImagePosition(clickPos);\r\n            dirty = true;\r\n          }\r\n          if(state === states.SOLUTION_DRAW){\r\n            if(evt.shiftKey){\r\n              // close polygon\r\n              if(self.solution !== null){\r\n                self.solution.close();\r\n                state = states.DEFAULT;\r\n                self.onSolutionChange(self.exportSolution());\r\n              }\r\n            } else {\r\n              var newVertexPosition = convertToImagePosition(clickPos)\r\n                , newVertex = new Vertex(newVertexPosition.x, newVertexPosition.y);\r\n              if(self.solution === null) self.solution = new Polygon();\r\n              self.solution.addVertex(newVertex);\r\n            }\r\n            self.onSolutionChange(self.exportSolution());\r\n            dirty = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function onMouseWheel(evt){\r\n      if (!evt) evt = event;\r\n      evt.preventDefault();\r\n      if(evt.detail < 0 || evt.wheelDelta > 0){ // up -> smaller\r\n        self.zoomOut();\r\n      } else { // down -> larger\r\n        self.zoomIn();\r\n      }\r\n    }\r\n\r\n    function onMouseMove(evt){\r\n      var rect = canvas.getBoundingClientRect()\r\n        , newPos = {\r\n            x: evt.clientX - rect.left,\r\n            y: evt.clientY - rect.top\r\n          };\r\n      mouseLastPos = mouseLastPos || { x: 0, y: 0 };\r\n      var deltaX = newPos.x - mouseLastPos.x\r\n        , deltaY = newPos.y - mouseLastPos.y;\r\n      if(leftMouseButtonDown){\r\n        if(activeMoveElement === centre){\r\n          activeMoveElement.x -= deltaX / scale;\r\n          activeMoveElement.y -= deltaY / scale;\r\n        } else {\r\n          activeMoveElement.x += deltaX / scale;\r\n          activeMoveElement.y += deltaY / scale;\r\n        }\r\n        self.onSolutionChange(self.exportSolution());\r\n        dirty = true;\r\n      } else {\r\n        var activeElement = getUIElement(evt)\r\n          , oldToolTip = currentTooltip;\r\n        if(activeElement !== null && typeof activeElement.tooltip !== 'undefined'){\r\n          currentTooltip = activeElement.tooltip;\r\n        } else {\r\n          currentTooltip = null;\r\n        }\r\n        if(oldToolTip !== currentTooltip) dirty = true;\r\n      }\r\n      mouseLastPos = newPos;\r\n      if(solutionEditable && Math.max(Math.abs(deltaX), Math.abs(deltaY)) > 2) dirty = true;\r\n    }\r\n\r\n    function Button(icon, tooltip){\r\n      // drawn on position\r\n      this.drawPosition = null;\r\n      this.drawRadius = 0;\r\n\r\n      // transparency\r\n      this.alpha = 0.5;\r\n\r\n      // color\r\n      this.color = '#000000';\r\n\r\n      // icon unicode from awesome font\r\n      this.icon = icon;\r\n      this.iconColor = '#ffffff';\r\n\r\n      // tooltip\r\n      this.tooltip = tooltip || null;\r\n\r\n      // enabled state\r\n      this.enabled = false;\r\n      this.enabledAlpha = 0.7;\r\n\r\n      // click action\r\n      this.onClick = function(){ alert('no click action set!'); };\r\n\r\n      // mouse down action\r\n      this.onMouseDown = function(){ return false; };\r\n    }\r\n\r\n    Button.prototype.isWithinBounds = function(x, y){\r\n      if(this.drawPosition === null) return false;\r\n      var dx = Math.abs(this.drawPosition.x - x)\r\n        , dy = Math.abs(this.drawPosition.y - y);\r\n      return  dx * dx + dy * dy <= this.drawRadius * this.drawRadius;\r\n    };\r\n\r\n    Button.prototype.draw = function(ctx, x, y, radius){\r\n      this.drawPosition = { x: x, y: y };\r\n      this.drawRadius = radius;\r\n\r\n      // preserve context\r\n      ctx.save();\r\n\r\n      // drawing settings\r\n      var isEnabled = (typeof this.enabled === 'function') ? this.enabled() : this.enabled;\r\n      ctx.globalAlpha = (isEnabled) ? this.enabledAlpha : this.alpha;\r\n      ctx.fillStyle= this.color;\r\n      ctx.lineWidth = 0;\r\n\r\n      // draw circle\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius, 0, 2 * Math.PI);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // draw icon\r\n      ctx.save();\r\n      ctx.globalCompositeOperation = 'destination-out';\r\n      drawAwesomeIcon(ctx, this.icon, this.iconColor, x, y, radius);\r\n      ctx.restore();\r\n\r\n      // restore context\r\n      ctx.restore();\r\n    };\r\n\r\n    function drawAwesomeIcon(ctx, icon, color, centreX, centreY, size){\r\n      // font settings\r\n      ctx.font = size + \"px FontAwesome\";\r\n      ctx.fillStyle = color;\r\n\r\n      // calculate position\r\n      var textSize = ctx.measureText(icon)\r\n        , x = centreX - textSize.width / 2\r\n        , y = centreY + size * 0.7 / 2;\r\n\r\n      // draw it\r\n      ctx.fillText(icon, x, y);\r\n    }\r\n\r\n    function addEventListener(eventTarget, eventType, listener){\r\n      eventTarget.addEventListener(eventType, listener);\r\n      events.push({eventTarget: eventTarget, eventType: eventType, listener: listener});\r\n    }\r\n\r\n    function removeAllEventListeners(){\r\n      var _i, _events = events.slice(), _current;\r\n      for(_i = 0; _i < _events.length; _i++){\r\n        _current = _events[_i];\r\n        _current.eventTarget.removeEventListener(_current.eventType, _current.listener);\r\n      }\r\n      events = [];\r\n    }\r\n\r\n    function addEventListeners(){\r\n      // dragging image or ui-elements\r\n      addEventListener(document, 'mousedown', onMouseDown);\r\n      addEventListener(document, 'mouseup', onMouseUp);\r\n\r\n      // zooming\r\n      addEventListener(canvas, 'DOMMouseScroll', onMouseWheel);\r\n      addEventListener(canvas, 'mousewheel', onMouseWheel);\r\n\r\n      // moving\r\n      addEventListener(canvas, 'mousemove', onMouseMove);\r\n\r\n      // setting answer\r\n      addEventListener(canvas, 'click', onMouseClick);\r\n    }\r\n\r\n    this.dispose = function(){\r\n      removeAllEventListeners();\r\n      stopRendering = true;\r\n    };\r\n\r\n    this.refresh = function(){\r\n      self.dirty = true;\r\n    };\r\n\r\n    function initialize(){\r\n      //// init image\r\n      self.image.addEventListener('load', onImageLoad, false);\r\n      self.image.src = imageUrl;\r\n\r\n      //// init solution\r\n      if(Object.prototype.toString.call(options.solution) === '[object Array]')\r\n        self.importSolution(options.solution);\r\n\r\n      //// init buttons\r\n      // apply zooming functions to their buttons\r\n      zoomOutButton.onClick = function(){ self.zoomOut(); };\r\n      zoomInButton.onClick = function(){ self.zoomIn(); };\r\n      // if answer feature enable, show their buttons\r\n      if(answerEditable){\r\n        // delete answer button\r\n        deleteAnswerButton.onClick = function(){\r\n          self.answer = null;\r\n          dirty = true;\r\n        };\r\n        // add answer button\r\n        addAnswerButton.enabled = function(){\r\n          return (state === states.ANSWER_DRAW);\r\n        };\r\n        // onclick: toggle draw answer mode\r\n        addAnswerButton.onClick = function(){\r\n          state = (state === states.ANSWER_DRAW) ? states.DEFAULT : states.ANSWER_DRAW;\r\n          dirty = true;\r\n        };\r\n        // merge them with the other buttons\r\n        buttons = defaultButtons.concat(answerButtons);\r\n      }\r\n      // if solution feature enable, show their buttons\r\n      if(solutionEditable){\r\n        drawSolutionPointButton.enabled = function(){\r\n          return (state === states.SOLUTION_DRAW);\r\n        };\r\n        drawSolutionPointButton.onClick = function(){\r\n          state = (state === states.SOLUTION_DRAW)\r\n                        ? states.DEFAULT\r\n                        : states.SOLUTION_DRAW;\r\n          dirty = true;\r\n        };\r\n        moveSolutionButton.enabled = function(){\r\n          return (state === states.SOLUTION_MOVE);\r\n        };\r\n        moveSolutionButton.onClick = function(){\r\n          state = (state === states.SOLUTION_MOVE)\r\n                        ? states.DEFAULT\r\n                        : states.SOLUTION_MOVE;\r\n          dirty = true;\r\n        };\r\n        deleteSolutionPointButton.enabled = function(){\r\n          return (state === states.SOLUTION_POINT_DELETE);\r\n        };\r\n        deleteSolutionPointButton.onClick = function(){\r\n          state = (state === states.SOLUTION_POINT_DELETE)\r\n                        ? states.DEFAULT\r\n                        : states.SOLUTION_POINT_DELETE;\r\n          dirty = true;\r\n        };\r\n        deleteSolutionButton.onClick = function(){\r\n          self.solution = null;\r\n          self.onSolutionChange(self.exportSolution());\r\n          dirty = true;\r\n        };\r\n\r\n        // merge them with the other buttons\r\n        buttons = defaultButtons.concat(solutionButtons);\r\n      }\r\n\r\n      //// init Input handling\r\n      addEventListeners();\r\n    }\r\n\r\n    initialize();\r\n  }\r\n\r\n  window.ImageViewer = ImageViewer;\r\n}(window));\r\n"]}